<div class="card">
    <h2>ðŸ’¸ Despesas</h2>
    
    <form action="/despesas/nova" method="post" style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
        <h3>Nova Despesa</h3>
        <div class="form-group">
            <label>DescriÃ§Ã£o:</label>
            <input type="text" name="descricao" required>
        </div>
        
        <div class="form-group">
            <label>Valor (R$):</label>
            <input type="number" name="valor" step="0.01" required>
        </div>
        
        <div class="form-group">
            <label>Categoria:</label>
            <select name="categoria" required>
                <option value="material">Material</option>
                <option value="conta">Conta</option>
                <option value="transporte">Transporte</option>
                <option value="outros">Outros</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Data:</label>
            <input type="date" name="data" value="<%= Date.today.to_s %>" required>
        </div>
        
        <button type="submit" class="btn">ðŸ’¾ Salvar Despesa</button>
    </form>

    <h3>HistÃ³rico de Despesas</h3>
    <% if @despesas.any? %>
        <table>
            <thead>
                <tr>
                    <th>Data</th>
                    <th>DescriÃ§Ã£o</th>
                    <th>Categoria</th>
                    <th>Valor</th>
                </tr>
            </thead>
            <tbody>
                <% @despesas.each do |despesa| %>
                    <tr>
                        <td><%= Date.parse(despesa['data']).strftime('%d/%m/%Y') rescue despesa['data'] %></td>
                        <td><%= despesa['descricao'] %></td>
                        <td><%= despesa['categoria'].capitalize %></td>
                        <td style="color: #f44336;"><strong>R$ <%= '%.2f' % despesa['valor'] %></strong></td>
                    </tr>
                <% end %>
            </tbody>
        </table>
    <% else %>
        <p>Nenhuma despesa registrada.</p>
    <% end %>
</div>