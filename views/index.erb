<div class="card">
    <h2>Dashboard</h2>
    
    <% 
        clientes = carregar_dados(CLIENTES_FILE)
        pedidos = carregar_dados(PEDIDOS_FILE)
        despesas = carregar_dados(DESPESAS_FILE)
        
        total_clientes = clientes.size
        pedidos_ativos = pedidos.count { |p| p['status'] != 'entregue' }
        total_receitas = pedidos.select { |p| p['pago'] }.sum { |p| p['preco'].to_f }
        total_despesas = despesas.sum { |d| d['valor'].to_f }
        lucro = total_receitas - total_despesas
    %>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 20px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 5px; text-align: center;">
            <h3>Clientes</h3>
            <div style="font-size: 24px; font-weight: bold;"><%= total_clientes %></div>
        </div>
        <div style="background: #fff3e0; padding: 15px; border-radius: 5px; text-align: center;">
            <h3>Pedidos Ativos</h3>
            <div style="font-size: 24px; font-weight: bold;"><%= pedidos_ativos %></div>
        </div>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; text-align: center;">
            <h3>Receitas</h3>
            <div style="font-size: 24px; font-weight: bold; color: #4CAF50;">
                R$ <%= '%.2f' % total_receitas %>
            </div>
        </div>
        <div style="background: #ffebee; padding: 15px; border-radius: 5px; text-align: center;">
            <h3>Lucro</h3>
            <div style="font-size: 24px; font-weight: bold; color: <%= lucro >= 0 ? '#4CAF50' : '#f44336' %>;">
                R$ <%= '%.2f' % lucro %>
            </div>
        </div>
    </div>

    <div style="margin-top: 20px;">
        <a href="/pedidos/novo" class="btn">âž• Novo Pedido</a>
        <a href="/clientes" class="btn">ðŸ‘¥ Ver Clientes</a>
    </div>
</div>